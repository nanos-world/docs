"use strict";(self.webpackChunkdocs_docusaurus=self.webpackChunkdocs_docusaurus||[]).push([[56540],{627:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/network-authority-solution-c865e7c9abd5fa2c1bc6ee5d50213cdb.jpg"},689:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/network-authority-problem-87e59351e261f860e32abf36e8150ffb.jpg"},7157:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/swagger-137c5ff2a490efb7ffa89089cedfddd4.png"},19027:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-03-10fc7464a1e4a7c85ffb5c6fea70843c.webp"},19244:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>h});var i=t(55004),s=t(74848),a=t(28453);const o={slug:"february-2022",title:"Feb: UE5 & Network Authority!",authors:"gtnardy",tags:["updates"]},r=void 0,l={authorsImageUrls:[void 0]},h=[{value:"Network Authority System",id:"network-authority-system",level:2},{value:"New Debug Modes",id:"new-debug-modes",level:2},{value:"Store API",id:"store-api",level:2},{value:"Documentation Changes",id:"documentation-changes",level:2},{value:"Modules",id:"modules",level:3},{value:"Unreal Engine 5: Preview",id:"unreal-engine-5-preview",level:2},{value:"Migrating nanos world",id:"migrating-nanos-world",level:3},{value:"Graphics",id:"graphics",level:3},{value:"Technical",id:"technical",level:3},{value:"Stability",id:"stability",level:3},{value:"UE5 worth it now?",id:"ue5-worth-it-now",level:3},{value:"Negative Points \ud83d\udc4e",id:"negative-points-",level:4},{value:"Positive Points \ud83d\udc4d",id:"positive-points-",level:4},{value:"Community Spotlight",id:"community-spotlight",level:2}];function d(e){const n={a:"a",admonition:"admonition",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{VideoExternal:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("VideoExternal",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Unreal Engine 5 Preview, new Network Authority System, Store API and more"})}),"\n",(0,s.jsx)(n.h2,{id:"network-authority-system",children:"Network Authority System"}),"\n",(0,s.jsx)(n.p,{children:'As everyone knows, nanos world relies on a "server-less" solution for physics and other world operations. All the sync relies of sharing data between the players and replicating in each client. This approach brings several advantages and of course some drawbacks, in the advantages we can include a very lightweight server, where we have all the control over it, without needing to rely on Unreal\'s server executable or the way it handles the network.'}),"\n",(0,s.jsxs)(n.p,{children:["In the other hand we got some challenges on how to distribute physics information and other stuff. Then in the beginning we created our first Network Authority system in which each player is responsible for sharing a specific set of entities from the server to others, similar to ",(0,s.jsx)(n.a,{href:"https://developer.roblox.com/en-us/articles/Network-Ownership",children:"Roblox Solution"}),"."]}),"\n",(0,s.jsx)(n.p,{children:'However, just like in Roblox, some problems become more noticeable when we have many players connected with many different pings. As some players will receive the "network authority" over entities faster than others, they will start sharing their location/rotation to other players while the \'old\' network authority is still the authority over that because he didn\'t receive the "lost network authority" message yet.'}),"\n",(0,s.jsx)(n.p,{children:"We created this diagram to exemplify the problem:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(689).A+"",width:"851",height:"681"})}),"\n",(0,s.jsx)(n.p,{children:'As you could notice, there is a "gap" and a "overlap" when switching network authority if we have discrepancies between players ping, causing several weird behaviors on physics objects.'}),"\n",(0,s.jsx)(n.p,{children:"Considering this and after much study, we improved our Network Authority system to make it more robust, this new way aims to fill up the gaps and ignore overlaps:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(627).A+"",width:"851",height:"681"})}),"\n",(0,s.jsx)(n.p,{children:'While still in a "beta" version, with this new system we intend to improve all the "warnings" and flickering problems that were occurring since then, all feedback is appreciated!'}),"\n",(0,s.jsx)(n.h2,{id:"new-debug-modes",children:"New Debug Modes"}),"\n",(0,s.jsxs)(n.p,{children:["With the addition of the new Network Authority system, we are adding a new ",(0,s.jsx)(n.strong,{children:"Debug"})," section in the Settings."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(35228).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsxs)(n.p,{children:["A cool setting is the ",(0,s.jsx)(n.strong,{children:"Draw Network Debug"})," which draws on World all network information:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(59936).A+"",width:"1916",height:"1079"})}),"\n",(0,s.jsxs)(n.p,{children:["You can find more information in the ",(0,s.jsx)(n.a,{href:"/docs/next/core-concepts/scripting/authority-concepts#debugging-network--network-authority",children:"Network Authority"})," page."]}),"\n",(0,s.jsx)(n.p,{children:'Also you can fake "packet loss" which will simulate some Sync Data being discarded.'}),"\n",(0,s.jsx)(n.h2,{id:"store-api",children:"Store API"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(7157).A+"",width:"1400",height:"392"})}),"\n",(0,s.jsxs)(n.p,{children:["Last month we released our ",(0,s.jsx)(n.a,{href:"https://store.nanos.world",children:"Store"}),", a place to share and download community Assets & Packages, integrated with the game."]}),"\n",(0,s.jsxs)(n.p,{children:["Now we are releasing the ",(0,s.jsx)(n.strong,{children:"Store API"}),": You can download, upload and edit your resources through HTTP requests, check it the Swagger documentation at ",(0,s.jsx)(n.a,{href:"https://api.nanos.world/store/docs",children:"https://api.nanos.world/store/docs"}),". More tutorials coming soon\u2122."]}),"\n",(0,s.jsx)(n.h2,{id:"documentation-changes",children:"Documentation Changes"}),"\n",(0,s.jsx)(n.h3,{id:"modules",children:"Modules"}),"\n",(0,s.jsxs)(n.p,{children:["We've added a new tutorial for creating your own C Module. You can check it out at the ",(0,s.jsx)(n.a,{href:"/docs/next/core-concepts/packages/c-module",children:"Modules"})," page."]}),"\n",(0,s.jsx)(n.h2,{id:"unreal-engine-5-preview",children:"Unreal Engine 5: Preview"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(46219).A+"",width:"1920",height:"800"})}),"\n",(0,s.jsxs)(n.p,{children:["A week ago, Epic Games gave us the wonderful news that they were releasing ",(0,s.jsx)(n.a,{href:"https://www.unrealengine.com/en-US/blog/unreal-engine-5-is-now-available-in-preview",children:"Unreal Engine 5: Preview"}),". A Preview release means most of the features are already present and almost ready for a final shipping version."]}),"\n",(0,s.jsxs)(n.p,{children:["And we, as good enthusiasts, and in addition to our other blog news (",(0,s.jsx)(n.a,{href:"/blog/november-2021",children:"November: Unreal Engine 5?"}),") decided to give another try on converting nanos world into Unreal Engine 5. And let's move to our impressions:"]}),"\n",(0,s.jsx)(n.h3,{id:"migrating-nanos-world",children:"Migrating nanos world"}),"\n",(0,s.jsx)(n.p,{children:"This time migrating nanos world to Unreal Engine 5: Preview was more trickier, we've got even more deprecated methods and some functionalities changed and/or removed, which required more hard work converting and debugging what has changed."}),"\n",(0,s.jsx)(n.p,{children:"We've had to update a lot more code and files than the Early Access version to be able just to launch the Project. Also Vehicles had to be disabled due the new Chaos engine, which completely changes how Vehicles need to be implemented and we didn't want to bother on converting them right now."}),"\n",(0,s.jsx)(n.h3,{id:"graphics",children:"Graphics"}),"\n",(0,s.jsxs)(n.p,{children:["Unreal Engine 5 introduces ",(0,s.jsx)(n.a,{href:"https://www.unrealengine.com/en-US/blog/lumen-in-ue5-let-there-be-light",children:"Lumen"}),", a new dynamic Global Illumination method, and playing with it is very cool and impressive. Here's some screenshots taken from our Testing Map:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(91069).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(96816).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(19027).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(30106).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(51205).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(75559).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Next you can see how the object colors can reflect dynamically in the environment lights."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(94638).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(64361).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(69996).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(27087).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Here we can see the contribution of Emissive Materials to the environment."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(21860).A+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(n.p,{children:"A cool feature is that we can enable Hardware-Accelerated for calculating Lumen (which replaces Hardware Ray Tracing), and tested with a RTX 3070 makes it even more beauty at a really low GPU cost."}),"\n",(0,s.jsx)(n.h3,{id:"technical",children:"Technical"}),"\n",(0,s.jsx)(n.p,{children:"In the technical aspect, the biggest changes Unreal 5 brings are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lumen"})," (Dynamic Global Illumination)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nanite"})," (Mesh Virtualization)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Chaos"})," (new Physics Engine)"]}),"\n",(0,s.jsxs)(n.li,{children:["and also not less important, the new features regarding World/Level creation (",(0,s.jsx)(n.strong,{children:"One File Per Actor"})," and ",(0,s.jsx)(n.strong,{children:"World Partition"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["While Lumen, Nanite and World features can be toggled on or off (we can choose to use it or not), the same truth is not valid for ",(0,s.jsx)(n.strong,{children:"Chaos"}),". Unreal is completely removing PhysX and replacing by it's new Physics Engine: ",(0,s.jsx)(n.strong,{children:"Chaos"}),". Although we are open to new things, unfortunately Chaos doesn't seem to be in a totally good state, neither at least at the same level/stability as PhysX."]}),"\n",(0,s.jsx)(n.p,{children:'We could experience several Collision glitches, such as objects flickering, wrong "collision boxes", objects flying through walls, bugs with Rope (Cable), objects sleeping randomly, bad Hit events callbacks and so on.'}),"\n",(0,s.jsx)(n.p,{children:"Most of the problems we could find an workaround (like applying force to some objects so they don't sleep, or finding a workaround on the Cables settings), but the main problem we've found using Chaos is the Hit feedback event, which are totally inconsistent, sometimes they are triggered with force 0, which annoys the hit sounds and also the nanos world Hit events from being triggered, and this can break gameplay/scripting functionalities."}),"\n",(0,s.jsx)(n.p,{children:"Not to mention the objects flickering/disappearing/losing collisions which gives a really bad impression on the game quality."}),"\n",(0,s.jsx)(n.p,{children:"And we didn't even started implementing the new Chaos Vehicles, can't wait what we gonna find there \ud83d\ude05."}),"\n",(0,s.jsx)(n.h3,{id:"stability",children:"Stability"}),"\n",(0,s.jsx)(n.p,{children:"Actually, this version of Unreal surprised us positively, it had less crashes than in early access, but still had some, but in this case it was when we were stressing the game really hard using several balloons, cables and props flying around. Although I was a little disappointed as most of the bugs I found in the Early Access were still prevent in this Preview and weren't yet fixed."}),"\n",(0,s.jsx)(n.p,{children:"Also some rare bugs could be noticed, like suddenly being teleported to the 0, 0, 0 location, which we couldn't yet find the reason."}),"\n",(0,s.jsx)(n.h3,{id:"ue5-worth-it-now",children:"UE5 worth it now?"}),"\n",(0,s.jsx)(n.p,{children:'Summing up, we\'ve created a list of positive and negative points according to our view regarding if we should or not migrate to Unreal 5 "right now":'}),"\n",(0,s.jsx)(n.p,{children:'Also, another point to consider: we are going to migrate to Unreal Engine 5 soon or later, the decision is "when". \ud83d\ude09'}),"\n",(0,s.jsx)(n.h4,{id:"negative-points-",children:"Negative Points \ud83d\udc4e"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Gameplay Bugs related to Physics, objects jumping, flickering, bad collisions happening, objects passing through floor/walls due ",(0,s.jsx)(n.strong,{children:"Chaos"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Visual Artifacts, not only related to Lumen, but to the standard Rendering methods as well."}),"\n",(0,s.jsx)(n.li,{children:"Random Unreal internal Crashes, which we cannot fix by ourselves."}),"\n",(0,s.jsx)(n.li,{children:"More frequent Unreal updates, much probably we are going to have other Preview version, and after the UE5 release we are going to get several hotfixes, and each one will much likely require us from rebuilding all assets and publishing a new version of them, otherwise they won't work in the new versions. This means the Asset Packs won't work in newer Unreal versions."}),"\n",(0,s.jsx)(n.li,{children:"Using Lumen has it's drawbacks, such as the performance, which can hit from 25% to 50% of the FPS (but can be toggled on/off)."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"positive-points-",children:"Positive Points \ud83d\udc4d"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"We are going to be the first ones to explore Unreal Engine 5 (which can be bad because some problems no one figured out yet, but personally I love exploring new features and using new tools)."}),"\n",(0,s.jsx)(n.li,{children:"nanos world will have a great self-marketing potential, and also can bring lots of new enthusiasts on UE5 to know, play and create with the game."}),"\n",(0,s.jsx)(n.li,{children:"Lumen is fun and beautiful."}),"\n",(0,s.jsxs)(n.li,{children:["New World/Level tools which allows creating big maps and also improves a lot the co-creations pipelines using the ",(0,s.jsx)(n.strong,{children:"One File Per Actor"})," system and ",(0,s.jsx)(n.strong,{children:"World Partition"}),"!"]}),"\n",(0,s.jsx)(n.li,{children:"New Unreal Editor which has a fresh and pleasing look."}),"\n",(0,s.jsx)(n.li,{children:"Lots of new tools and technology to use, including Nanite, Chaos Destruction, Animation tools (which can help us from dynamically linking your custom Animation Blueprint) and the new MetaSounds."}),"\n",(0,s.jsx)(n.li,{children:"It's really hard to convert nanos world from scratch every update to test it's stability, I can't reuse the previous conversion because many changes are in blueprints (UI) that I can't merge and lots had changed since then. So converting once and right now we can already start digging, fixing stuff and the next unreal updates will be easier and faster to test and maintain."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Unlike Early Access, this version seemed to have more positives than negatives points, and it seems like a better opportunity than before to officially migrate nanos world. Come to our ",(0,s.jsx)(n.a,{href:"https://discord.nanos-world.com",children:"Discord"})," to discuss this idea with us! We are going to make a poll to bring all feedback from the community!"]}),"\n",(0,s.jsx)(n.h2,{id:"community-spotlight",children:"Community Spotlight"}),"\n",(0,s.jsx)(n.p,{children:"Here we'd like to share all amazing stuff our community is doing the last weeks!"}),"\n",(0,s.jsx)(n.p,{children:"Timmy is doing an amazing job, and is sharing it's new Inventory System:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(42186).A+"",width:"1920",height:"1080"})}),"\n",(0,s.jsx)(n.p,{children:"Also Timmy created a nice smooth Weather system transition:"}),"\n",(0,s.jsx)(i,{path:"/blog/february/timmy-weather-01.webm"}),"\n",(0,s.jsx)(i,{path:"/blog/february/timmy-weather-02.webm"}),"\n",(0,s.jsxs)(n.p,{children:["MegaThorx released it's brand new ",(0,s.jsx)(n.a,{href:"https://store.nanos.world/packages/egui/",children:"EGUI"})," library. A Package for creating GUIs from scripting! It also contains it's own complete ",(0,s.jsx)(n.a,{href:"https://nanos-world.github.io/egui-docs/",children:"documentation"}),"!"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(48963).A+"",width:"620",height:"549"})}),"\n",(0,s.jsx)(n.p,{children:"Voltaism shared a very cool implementation of Bots playing his game-mode VZombies by themselves with no Players:"}),"\n",(0,s.jsx)(i,{path:"/blog/february/voltaism-bots.mp4"})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},21860:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-11-1ba295a5389ab5d27ebe12102556bc94.webp"},27087:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-07-b058dbf656e33a559aa0900e35972f96.webp"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(96540);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}},30106:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-08-aec5017efd82f3bdde9b3e6607a34c0a.webp"},35228:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/debug-settings-885b03f9c7b3d5c87f58b1cf04773aae.jpg"},42186:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/timmy-inventory-ccb55318e9d7ca72d23c5deb3a25c0d1.jpg"},46219:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/matrix-725aac4bb78eb865c7eab146e3104fe9.webp"},48963:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/megathorx-egui-7848a96c802b8db0a86912f6d7f5bc75.jpg"},51205:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-09-abef116ebcaa24e2a29d5186df6c1594.webp"},55004:e=>{e.exports=JSON.parse('{"permalink":"/blog/february-2022","editUrl":"https://github.com/nanos-world/docs/edit/master/blog/2022-03-02-february.md","source":"@site/blog/2022-03-02-february.md","title":"Feb: UE5 & Network Authority!","description":"Unreal Engine 5 Preview, new Network Authority System, Store API and more","date":"2022-03-02T00:00:00.000Z","tags":[{"inline":true,"label":"updates","permalink":"/blog/tags/updates"}],"readingTime":8.84,"hasTruncateMarker":true,"authors":[{"name":"Gabriel \u2022 SyedMuhammad","title":"lead developer\u2122","page":{"permalink":"/blog/authors/gtnardy"},"description":"nanos world Lead Developer.","socials":{"x":"https://x.com/gtnardy","github":"https://github.com/gtnardy"},"imageURL":"/img/blog/syed.webp","key":"gtnardy"}],"frontMatter":{"slug":"february-2022","title":"Feb: UE5 & Network Authority!","authors":"gtnardy","tags":["updates"]},"unlisted":false,"prevItem":{"title":"Mar: Steam, Database & Blueprints!","permalink":"/blog/march-2022"},"nextItem":{"title":"Jan: Store & Vault!","permalink":"/blog/january-2022"}}')},59936:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/debug-visualizer-b38be009f40606f53dda917079b0755a.webp"},64361:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-05-aa13290f8ba361a6338f56181f18f644.webp"},69996:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-06-6a39fd769c3ab1456d0b9fb5a59510ad.webp"},75559:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-10-7a69b3bc58ba2c58fa541919aaf30824.webp"},91069:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-01-a0a1fe11cba32feeb343a97470446421.webp"},94638:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-04-0128730df1a03ee64547e583f3fc6d5b.webp"},96816:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ue5-graphics-02-3a2b8c240abbeca7fc343ed70ce57ef3.webp"}}]);