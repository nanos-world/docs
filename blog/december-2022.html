<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">2022 Dec: One VM to Rule Them All! | nanos world</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.nanos.world/blog/december-2022"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="2022 Dec: One VM to Rule Them All! | nanos world"><meta data-rh="true" name="description" content="One Lua Virtual Machine to Rule Them All!"><meta data-rh="true" property="og:description" content="One Lua Virtual Machine to Rule Them All!"><meta data-rh="true" property="og:image" content="https://docs.nanos.world/img/blog/2022-december/december-news.webp"><meta data-rh="true" name="twitter:image" content="https://docs.nanos.world/img/blog/2022-december/december-news.webp"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-01-04T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://twitter.com/gtnardy"><meta data-rh="true" property="article:tag" content="updates"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.nanos.world/blog/december-2022"><link data-rh="true" rel="alternate" href="https://docs.nanos.world/blog/december-2022" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.nanos.world/pt-BR/blog/december-2022" hreflang="pt-BR"><link data-rh="true" rel="alternate" href="https://docs.nanos.world/de/blog/december-2022" hreflang="de"><link data-rh="true" rel="alternate" href="https://docs.nanos.world/fr/blog/december-2022" hreflang="fr"><link data-rh="true" rel="alternate" href="https://docs.nanos.world/blog/december-2022" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://2O07FIGQII-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="nanos world RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="nanos world Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="nanos world" href="/opensearch.xml">


<script src="https://pac.nanos.io/js/script.js" async data-domain="docs.nanos.world"></script><link rel="stylesheet" href="/assets/css/styles.010e09c7.css">
<link rel="preload" href="/assets/js/runtime~main.97db1989.js" as="script">
<link rel="preload" href="/assets/js/main.4fcf67ff.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://nanos.world/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/nanos-world.png" alt="nanos world" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/nanos-world.png" alt="nanos world" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">nanos world</b></a><a class="navbar__item navbar__link" href="/docs">docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">news</a><a class="navbar__item navbar__link" href="/changelog">changelog</a><a class="navbar__item navbar__link" href="/feedback">feedback</a><a href="https://issues.nanos.world" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">bugs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://auth.nanos.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">account<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs">latest - a1.51.x ‚öñÔ∏è</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next">bleeding-edge ü©∏</a></li><li><a class="dropdown__link" href="/docs">latest - a1.51.x ‚öñÔ∏è</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>üá¨üáß English</a><ul class="dropdown__menu"><li><a href="/blog/december-2022" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">üá¨üáß English</a></li><li><a href="/pt-BR/blog/december-2022" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="pt-BR">üáßüá∑ Portugu√™s (Brasil)</a></li><li><a href="/de/blog/december-2022" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">üá©üá™ Deutsch</a></li><li><a href="/fr/blog/december-2022" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">üá´üá∑ Fran√ßais</a></li><li><a href="https://crowdin.com/project/nanos-world-docs/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://discord.nanos.world" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord"></a><a href="https://github.com/nanos-world" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">nanos world news</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/april-2023">2023 April: Vehicle Health, Docs++!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/march-2023">2023 Mar: File Transfer, Map Package!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/february-2023">2023 Feb: Widgets &amp; Notifications!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/january-2023">2023 Jan: Character, Weather, Console!</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/december-2022">2022 Dec: One VM to Rule Them All!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/november-2022">2022 Nov: Entity System, UDS &amp; UE5.1!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/october-2022">2022 Oct: Playtest &amp; Big API Refactor!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/september-2022">2022 Sep: Dimensions!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/august-2022">2022 Aug: API, Auto Docs &amp; More!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/july-2022">2022 Jul: CEF, Settings Menu &amp; Improvs!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/june-2022">2022 Jun: Birthday, Rebrand &amp; UI Redesign!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/may-2022">2022 May: 666 Bugs Fixed &amp; P2P!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/april-2022">2022 Apr: Now on Unreal Engine 5!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/march-2022">2022 Mar: Steam, Database &amp; Blueprints!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/february-2022">2022 Feb: UE5 &amp; Network Authority!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/january-2022">2022 Jan: Store &amp; Vault!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/november-2021">2021 Nov: Unreal Engine 5?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/alpha-released">2021 Oct: Alpha released!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/weapons-improvements">Bonus Blog: Weapons Improvements!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/sandbox-improvements">2021 Sep: Sandbox Improvements!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/alpha">2021 Aug: Coming to Alpha!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/new-docs">Reworked Docs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/sandbox">Sandbox Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/vault">Vault Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/water">Water Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/vehicles">Vehicles Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/halloween">Halloween</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://docs.nanos.world/img/blog/2022-december/december-news.webp"><header><h1 class="title_f1Hy" itemprop="headline">2022 Dec: One VM to Rule Them All!</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-01-04T00:00:00.000Z" itemprop="datePublished">January 4, 2023</time> ¬∑ <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/gtnardy" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/img/blog/gtnardy.jpg" alt="Gabriel T. Nardy"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/gtnardy" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Gabriel T. Nardy</span></a></div><small class="avatar__subtitle" itemprop="description">nanos world developer (SyedMuhammad)</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><strong>One Lua Virtual Machine to Rule Them All!</strong></p><p><img loading="lazy" src="/assets/images/december-news-d3aff08ec5aef08f0426ecb558a5de57.webp" width="800" height="320" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="one-lua-virtual-machine">One Lua Virtual Machine<a href="#one-lua-virtual-machine" class="hash-link" aria-label="Direct link to One Lua Virtual Machine" title="Direct link to One Lua Virtual Machine">‚Äã</a></h2><p>After much analysis, study and refactoring. I am happily introducing the new way the Packages will work! This was heavily motivated by the lack of possibility of creating extensions or customized items in an easy way.</p><p><img loading="lazy" src="/assets/images/lua-vm-rule-e8974a9f5c70024e791f77fd541d4585.webp" width="976" height="549" class="img_ev3q"></p><p>In addition to the last new Entity System update, this change will heavily add to the possibilities of modding &amp; scripting capabilities to nanos world!</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Those changes are meant to have as little as possible impact and breaking changes, all tests I did so far assured everything is still backward compatible!</p></div></div><p>So far, we had one VM (Virtual Machine - or <code>lua_State</code>) created per Package. This caused each Package to be completely isolated from each other. Therefore it was necessary to create mechanisms for communication between the Packages, such as <strong>Events</strong> and <strong>Package.Export/Package.Call</strong> methods, which allowed (in a limited way) Packages to communicate with each other.</p><p>But as mentioned, this brought many limitations, such as it was not possible for Packages to access variables or call functions directly from other Packages, or even worse (which become more evident from the last update of Entity System): It was not possible to share custom classes between Packages!</p><p>However now all of this will be solved! I reworked the entire internal scripting system, and now instead of having a new virtual machine per Package, we will have a virtualized sandboxed environment (using Lua environment <code>_ENV</code> feature), separating the scope of each Package but allowing them to access a global shared environment!</p><p>This will allow the Packages to define classes, expose functions and share libraries globally! So that everyone else can use without the need for workaround mechanisms to do so!</p><p>Now, for example you can just load additional scripts together the <code>sandbox</code> game-mode which loads custom Classes of tools or weapons, and those will appear automatically in the Spawn Menu, no need for manually adding them anymore!</p><p>Each Package will still have it&#x27;s own sub-global environment, so defining global variables or functions will not make them available to other packages immediately.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="call--export">Call &amp; Export<a href="#call--export" class="hash-link" aria-label="Direct link to Call &amp; Export" title="Direct link to Call &amp; Export">‚Äã</a></h3><p><code>Package.Call</code> and <code>Package.Export</code> are not necessary in the traditional way anymore. As now we can share the global environment, we can define methods and expose them to be called directly, without the need to <code>Package.Call</code> them.</p><p>The <code>Package.Export</code> will still exist and work similarly. But now it will be possible to &quot;expose&quot; any value to the global scope! Example:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockTitle_Ktv7">package-01/Server/Index.lua</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">local</span><span class="token plain"> my_table </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">123</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">456</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">DoSomething</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">var1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> var1 </span><span class="token operator" style="color:rgb(0, 0, 0)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Package</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">Export</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;MyTable&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> my_table</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Package</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">Export</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;DoSomething&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> DoSomething</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockTitle_Ktv7">package-02/Server/Index.lua</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">Console</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">Log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">MyTable</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- 123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Console</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">Log</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">DoSomething</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">456</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- 579</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inherited-classes">Inherited Classes<a href="#inherited-classes" class="hash-link" aria-label="Direct link to Inherited Classes" title="Direct link to Inherited Classes">‚Äã</a></h3><p>Now all Inherited Classes will be available to all Packages, as they will be created and exposed to the Global scope automatically.</p><p>The first parameter of it will now be used as the variable name to set the class in the global scope. Also, it just got a new optional 2nd parameter to define a custom table contained custom values to be set in the class table before it&#x27;s created:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">-- Note we are assigning the return of Inherit to a variable called</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- MyPropClassLocal, but also MyPropClass will be defined globally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- as being our class, both variables points to the same Class table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">MyPropClassLocal </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Prop</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">Inherit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;MyPropClass&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;my_custom_value&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">123</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;my_another_value&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hello&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">local</span><span class="token plain"> val </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> MyPropClass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">my_custom_value</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">-- val == 123</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We&#x27;ve also added a new static event for getting when a new Inherited Class is registered: <code>ClassRegister</code>:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">Prop</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">Subscribe</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ClassRegister&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">-- Do something with the new class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">end</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="library-package-type">Library Package Type<a href="#library-package-type" class="hash-link" aria-label="Direct link to Library Package Type" title="Direct link to Library Package Type">‚Äã</a></h3><p>With this new way Package work, <code>library</code> types are no longer needed. As now we can communicate directly with other packages with exposed global methods, we can just define the methods to be exported with <code>Package.Export</code> and use them whenever we want.</p><p>In this way we will only have two types of &quot;lua script&quot; Packages: <code>game-mode</code> and <code>script</code>. All existing <code>library</code> packages will be automatically converted to <code>script</code> when loaded.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirepackage">RequirePackage<a href="#requirepackage" class="hash-link" aria-label="Direct link to RequirePackage" title="Direct link to RequirePackage">‚Äã</a></h3><p>Therefore, <code>Package.RequirePackage</code> will becomes unnecessary as well. As we can now reuse the same script globally, this method will be depreciated in favor of adding your package in the <code>package_dependencies</code> list of your Package&#x27;s Package.toml.</p><p><em>Package requiring</em> the default <code>nanos-world-vehicles</code> or <code>nanos-world-weapons</code> will load them as a standalone Package, as now they <strong>export</strong> the <code>NanosWorldWeapons</code> and <code>NanosWorldVehicles</code> tables globally.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gamemode-settings">GameMode Settings<a href="#gamemode-settings" class="hash-link" aria-label="Direct link to GameMode Settings" title="Direct link to GameMode Settings">‚Äã</a></h2><p>We are introducing the concept of custom settings for game-modes! These settings can be defined in <strong>Package.toml</strong> like that:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># game-mode custom settings configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token table class-name" style="color:rgb(38, 127, 153)">custom_settings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key property">my_toggle</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token key property">label</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;enable PVP&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token key property">type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;boolean&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token key property">description</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;whether to enable PVP or not&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token key property">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key property">my_text_input</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token key property">label</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;type anything&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token key property">type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token key property">description</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;custom text!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token key property">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hello world!&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These settings can be configured through server arguments <code>--custom_settings &quot;my_toggle = true, my_text_input = &#x27;awesome text!&#x27;, ...&quot;</code>, or through the New Game screen, which parses and displays the configuration dynamically when creating a new game:</p><p><img loading="lazy" src="/assets/images/new-game-settings-0add9142b13bcdc2ae0a7c7c5003bbb5.webp" width="1913" height="1025" class="img_ev3q"></p><p>The values defined can be accessed through the new method <code>Server.GetCustomSettings()</code>.</p><p>Please refer to the updated <a href="https://docs.nanos.world/docs/next/core-concepts/packages/packages-guide#custom-settings" target="_blank" rel="noopener noreferrer">Documentation Page</a> for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-files">Configuration Files<a href="#configuration-files" class="hash-link" aria-label="Direct link to Configuration Files" title="Direct link to Configuration Files">‚Äã</a></h2><p>As announced on previous blogs, the format of the configuration files are changing in the next update!</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>All <strong>Package.toml</strong> and <strong>Assets.toml</strong> in the old format will automatically self-convert to the new format as soon as they load for the first time.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="meta-block">Meta Block<a href="#meta-block" class="hash-link" aria-label="Direct link to Meta Block" title="Direct link to Meta Block">‚Äã</a></h3><p>Now we have a new common header among all <strong>Assets.toml</strong> and <strong>Package.toml</strong>: <code>[meta]</code>.</p><p>It will have the following format, which will be used to define general configurations mainly used by the store:</p><div><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockTitle_Ktv7">_meta.toml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">loading</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="font-size:.9em;font-weight:600;color:#0E75DD;text-align:center;padding-bottom:13px;text-decoration:underline"><a href="https://github.com/nanos-world/nanos-world-server/blob/main/_meta.toml" target="_blank">See full example on GitHub</a></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="package">Package<a href="#package" class="hash-link" aria-label="Direct link to Package" title="Direct link to Package">‚Äã</a></h3><p>For the Packages, we will have a new format to differentiate their Types. Each Package type will have an independent and different block of configurations. Now the Package type will be determined by defining a block <code>[game_mode]</code>, <code>[script]</code> or <code>[loading-screen]</code>.</p><p>This is how a game-mode Package.toml will look like:</p><div><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockTitle_Ktv7">_game_mode.toml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">loading</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="font-size:.9em;font-weight:600;color:#0E75DD;text-align:center;padding-bottom:13px;text-decoration:underline"><a href="https://github.com/nanos-world/nanos-world-server/blob/main/_game_mode.toml" target="_blank">See full example on GitHub</a></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-images">Configuration Images<a href="#configuration-images" class="hash-link" aria-label="Direct link to Configuration Images" title="Direct link to Configuration Images">‚Äã</a></h2><p>As you may have noticed, there is no more setting <code>image</code> on <strong>Package.toml</strong>, the same applies to <strong>Assets.toml</strong> and for the server image in the <strong>Config.toml</strong>.</p><p>Now, the images should be physically placed next to the <strong>.toml</strong> file with the name <code>Package.jpg</code>, <code>Assets.jpg</code> or <code>Server.jpg</code>.</p><p>This is a standardization to solve the image inconsistency between the store and the config file, as well as to avoid external and malicious links to be placed there. But this brings the drawback that only dedicated servers can display an image on the Server List from now on.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-static-classes">New Static Classes<a href="#new-static-classes" class="hash-link" aria-label="Direct link to New Static Classes" title="Direct link to New Static Classes">‚Äã</a></h2><p>Finally we are releasing the update with all the Static Class refactoring! This will give us a great new organization to find things at the docs, as now specific methods will be grouped into classes with names that make sense!</p><p>List of all new Static Classes:</p><ul><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/chat" target="_blank" rel="noopener noreferrer">üí¨ Chat</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/console" target="_blank" rel="noopener noreferrer">üî§ Console</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/debug" target="_blank" rel="noopener noreferrer">üêõ Debug</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/discord" target="_blank" rel="noopener noreferrer">‚òéÔ∏è Discord</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/level" target="_blank" rel="noopener noreferrer">üèùÔ∏è Level</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/navigation" target="_blank" rel="noopener noreferrer">üö¢ Navigation</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/postprocess" target="_blank" rel="noopener noreferrer">üñºÔ∏è PostProcess</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/sky" target="_blank" rel="noopener noreferrer">üåÖ Sky</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/steam" target="_blank" rel="noopener noreferrer">üéÆ Steam</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/trace" target="_blank" rel="noopener noreferrer">üîç Trace</a></li><li><a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/viewport" target="_blank" rel="noopener noreferrer">üì∫ Viewport</a></li></ul><p>Also, <a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/input" target="_blank" rel="noopener noreferrer">üïπÔ∏è Input</a> got a bunch of new methods and events as well from Client.</p><p>Many of the methods from <a href="https://docs.nanos.world/docs/next/scripting-reference/static-classes/client" target="_blank" rel="noopener noreferrer">‚å®Ô∏è Client</a> and the old <strong>üåç World</strong> were migrated to those classes! Check their pages for accurate information!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="renamed-events">Renamed Events<a href="#renamed-events" class="hash-link" aria-label="Direct link to Renamed Events" title="Direct link to Renamed Events">‚Äã</a></h2><p>Due our last poll, we are starting to change all events names which were with wrong names. We are standardizing them to the present tense, so events like <code>CharacterEntered</code> will be renamed to <code>CharacterEnter</code> for example.</p><p>All changes will keep the old event working as deprecated. Please get attention to the new warnings to update them to the newer version!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="assets-plugin-content">Assets Plugin Content<a href="#assets-plugin-content" class="hash-link" aria-label="Direct link to Assets Plugin Content" title="Direct link to Assets Plugin Content">‚Äã</a></h2><p>Now it is possible to create Asset Packs from Plugin Content, this will be the preferred way of creating content from now on as it prevents assets paths colliding with others.</p><p>For that, we added a new setting in <strong>Assets.toml</strong> to define if the Asset Pack is a plugin content: <code>is_plugin_content</code>.</p><p>Please refer to the updated <a href="https://docs.nanos.world/docs/next/assets-modding/creating-assets/importing-assets" target="_blank" rel="noopener noreferrer">Documentation Page</a> for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="store-improvements">Store Improvements<a href="#store-improvements" class="hash-link" aria-label="Direct link to Store Improvements" title="Direct link to Store Improvements">‚Äã</a></h2><p>Last month MegaThorx launched an update to the store, which greatly improves the upload flow of new versions. Now we have a progress bar, as well as special scripts to verify for syntax errors and potential problems. More features will be added in the future as well!</p><p><img loading="lazy" src="/assets/images/store-upload-7208f6af355be0579784ecfc8e66ff8f.webp" width="1259" height="723" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2><p>I was not very much satisfied on how nanos world was handling the possibilities of modding and scripting. It felt very limited and non natural the way scripters had to do to make packages to communicate with each other, it wasn&#x27;t allowing much customization or extensibility.</p><p>With the last month&#x27;s <a href="https://docs.nanos.world/docs/next/core-concepts/scripting/inheriting-classes" target="_blank" rel="noopener noreferrer">Entity System</a> and now with this change to how Packages work, I feel that a huge door of possibilities has just opened even more, which will give a good breath to new things to be added!</p><p>An excellent example of what now is possible to achieve is creating a blank <code>script</code> package with a custom special inherited Weapon, and just loading the Sandbox game-mode together with your script to make it show up in the Spawn Menu, without needing any special call or workaround! This is huge and tie all the remaining knots! ü•≥</p><p>This change to a single VM was a big change, at first I thought it was not going to work, but after done and performing tests I was very surprised and happy with the results! Now we have to refine and improve it even more!</p><p>Modding goes brrr!! Thank you for the support! See you next month! üí™üí™</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/updates">updates</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/nanos-world/docs/edit/master/blog/2023-01-04-december.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/january-2023"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">2023 Jan: Character, Weather, Console!</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/november-2022"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">2022 Nov: Entity System, UDS &amp; UE5.1!</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#one-lua-virtual-machine" class="table-of-contents__link toc-highlight">One Lua Virtual Machine</a><ul><li><a href="#call--export" class="table-of-contents__link toc-highlight">Call &amp; Export</a></li><li><a href="#inherited-classes" class="table-of-contents__link toc-highlight">Inherited Classes</a></li><li><a href="#library-package-type" class="table-of-contents__link toc-highlight">Library Package Type</a></li><li><a href="#requirepackage" class="table-of-contents__link toc-highlight">RequirePackage</a></li></ul></li><li><a href="#gamemode-settings" class="table-of-contents__link toc-highlight">GameMode Settings</a></li><li><a href="#configuration-files" class="table-of-contents__link toc-highlight">Configuration Files</a><ul><li><a href="#meta-block" class="table-of-contents__link toc-highlight">Meta Block</a></li><li><a href="#package" class="table-of-contents__link toc-highlight">Package</a></li></ul></li><li><a href="#configuration-images" class="table-of-contents__link toc-highlight">Configuration Images</a></li><li><a href="#new-static-classes" class="table-of-contents__link toc-highlight">New Static Classes</a></li><li><a href="#renamed-events" class="table-of-contents__link toc-highlight">Renamed Events</a></li><li><a href="#assets-plugin-content" class="table-of-contents__link toc-highlight">Assets Plugin Content</a></li><li><a href="#store-improvements" class="table-of-contents__link toc-highlight">Store Improvements</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.97db1989.js"></script>
<script src="/assets/js/main.4fcf67ff.js"></script>
</body>
</html>