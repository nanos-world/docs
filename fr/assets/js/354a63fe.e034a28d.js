"use strict";(self.webpackChunkdocs_docusaurus=self.webpackChunkdocs_docusaurus||[]).push([[534],{41128:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>o});var s=n(85893),t=n(11151);const i={title:"\xc9cran de chargement",description:"\xc9crans de chargement personnalis\xe9s pour vos serveurs",sidebar_position:1,tags:["scripting","ui","webui","packages"],keywords:["loading","screen","package","html","webui"]},c=void 0,l={id:"core-concepts/packages/loading-screen",title:"\xc9cran de chargement",description:"\xc9crans de chargement personnalis\xe9s pour vos serveurs",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-latest/core-concepts/packages/loading-screen.md",sourceDirName:"core-concepts/packages",slug:"/core-concepts/packages/loading-screen",permalink:"/fr/docs/core-concepts/packages/loading-screen",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/nanos-world-docs/fr",tags:[{inline:!0,label:"scripting",permalink:"/fr/docs/tags/scripting"},{inline:!0,label:"ui",permalink:"/fr/docs/tags/ui"},{inline:!0,label:"webui",permalink:"/fr/docs/tags/webui"},{inline:!0,label:"packages",permalink:"/fr/docs/tags/packages"}],version:"latest",sidebarPosition:1,frontMatter:{title:"\xc9cran de chargement",description:"\xc9crans de chargement personnalis\xe9s pour vos serveurs",sidebar_position:1,tags:["scripting","ui","webui","packages"],keywords:["loading","screen","package","html","webui"]},sidebar:"main",previous:{title:"C Module",permalink:"/fr/docs/core-concepts/packages/c-module"},next:{title:"Compatibility Versions",permalink:"/fr/docs/core-concepts/packages/compatibility-versions"}},a={},o=[{value:"Cr\xe9ation d&#39;un \xe9cran de chargement",id:"cr\xe9ation-dun-\xe9cran-de-chargement",level:2},{value:"Acc\xe9der \xe0 la progression de chargement/t\xe9l\xe9chargement",id:"acc\xe9der-\xe0-la-progression-de-chargementt\xe9l\xe9chargement",level:3},{value:"L&#39;\xe9v\xe8nement <code>UpdateScreen</code>",id:"l\xe9v\xe8nement-updatescreen",level:4},{value:"Informations sur le joueur",id:"informations-sur-le-joueur",level:3},{value:"Arr\xeater la musique du menu",id:"arr\xeater-la-musique-du-menu",level:3},{value:"Configurer votre serveur pour utiliser l&#39;\xe9cran de chargement",id:"configurer-votre-serveur-pour-utiliser-l\xe9cran-de-chargement",level:2}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.p,{children:["Dans nanos world il est possible d'ajouter un \xe9cran de chargement personnalis\xe9 et dynamique \xe0 votre serveur en utilisant ",(0,s.jsx)(r.a,{href:"/fr/docs/scripting-reference/classes/webui",children:"WebUI"}),"."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:n(64489).Z+"",width:"1919",height:"1079"})}),"\n",(0,s.jsx)(r.h2,{id:"cr\xe9ation-dun-\xe9cran-de-chargement",children:"Cr\xe9ation d'un \xe9cran de chargement"}),"\n",(0,s.jsxs)(r.p,{children:["Pour cela, vous devez cr\xe9er un nouveau Package de type ",(0,s.jsx)(r.a,{href:"#package-types",children:"loading-screen"}),", et ajouter vos fichiers HTML/CSS/JS dans le dossier racine du Package. Votre fichier HTML principal doit s'appeler ",(0,s.jsx)(r.code,{children:"index.html"}),". Votre dossier devrait ressembler \xe0 cela :"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-folder-structure",children:"Packages/\n\u2514\u2500\u2500 my-loading-screen/\n    \u251c\u2500\u2500 Package.toml\n    \u251c\u2500\u2500 index.html\n    \u251c\u2500\u2500 style.css\n    \u2514\u2500\u2500 ...\n"})}),"\n",(0,s.jsx)(r.h3,{id:"acc\xe9der-\xe0-la-progression-de-chargementt\xe9l\xe9chargement",children:"Acc\xe9der \xe0 la progression de chargement/t\xe9l\xe9chargement"}),"\n",(0,s.jsxs)(r.p,{children:["Pour pouvoir afficher des informations dynamiques sur l'\xe9cran, vous pouvez utiliser l'event ",(0,s.jsx)(r.code,{children:"UpdateScreen"})," (qui va \xeatre appel\xe9 toutes les quelques ms):"]}),"\n",(0,s.jsxs)(r.h4,{id:"l\xe9v\xe8nement-updatescreen",children:["L'\xe9v\xe8nement ",(0,s.jsx)(r.code,{children:"UpdateScreen"})]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,s.jsx)(r.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{style:{textAlign:"left"},children:(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"message"})})}),(0,s.jsx)(r.td,{style:{textAlign:"left"},children:"Affiche l'\xe9tat actuel (loading, validating, downloading... )"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{style:{textAlign:"left"},children:(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"message_secondary"})})}),(0,s.jsx)(r.td,{style:{textAlign:"left"},children:"Affiche le fichier/asset actuel en cours de chargement/t\xe9l\xe9chargement"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{style:{textAlign:"left"},children:(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"progress_small"})})}),(0,s.jsx)(r.td,{style:{textAlign:"left"},children:"Progression du fichier en cours de chargement/t\xe9l\xe9chargement"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{style:{textAlign:"left"},children:(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"progress_small_total"})})}),(0,s.jsx)(r.td,{style:{textAlign:"left"},children:"Taille du fichier en cours de chargement/t\xe9l\xe9chargement"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{style:{textAlign:"left"},children:(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"progress"})})}),(0,s.jsx)(r.td,{style:{textAlign:"left"},children:"Progression actuelle"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{style:{textAlign:"left"},children:(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"progress_total"})})}),(0,s.jsx)(r.td,{style:{textAlign:"left"},children:"Progression totale"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{style:{textAlign:"left"},children:(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"current_stage"})})}),(0,s.jsxs)(r.td,{style:{textAlign:"left"},children:["L'\xe9tape actuelle du chargement (",(0,s.jsx)(r.code,{children:"loading"}),", ",(0,s.jsx)(r.code,{children:"downloading"}),")"]})]})]})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",metastring:'title="Packages/my-loading-screen/index.js"',children:'Events.Subscribe("UpdateScreen", function(message, message_secondary, progress_small, progress_small_total, progress, progress_total, current_stage) {\n    // Mettre \xe0 jour l\'HTML ici\n});\n'})}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsxs)(r.p,{children:["You can use ",(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"progress"})})," and ",(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"progress_total"})})," for filling up the main loading bar, and ",(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"progress_small"})})," for a small/sub loading bar."]})}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsxs)(r.p,{children:["Toujours utiliser ",(0,s.jsx)(r.code,{children:"progress / progress_total"})," pour r\xe9cup\xe9rer le pourcentage ",(0,s.jsx)(r.code,{children:"%"})," actuel, car progress_total repr\xe9sente le nombre total de fichiers en cours de t\xe9l\xe9chargement."]})}),"\n",(0,s.jsx)(r.h3,{id:"informations-sur-le-joueur",children:"Informations sur le joueur"}),"\n",(0,s.jsx)(r.p,{children:"Aussi, il est possible de r\xe9cup\xe9rer les informations d'un joueur en acc\xe9dant \xe0 une variable globale nomm\xe9e LoadingScreen:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"var LoadingScreen = {\n  server_ip,\n  server_name,\n  server_description,\n  server_port,\n  player_nanos_id,\n  player_nanos_username\n};\n"})}),"\n",(0,s.jsx)(r.h3,{id:"arr\xeater-la-musique-du-menu",children:"Arr\xeater la musique du menu"}),"\n",(0,s.jsx)(r.p,{children:"Il est possible de d\xe9sactiver la musique du menu int\xe9gr\xe9 en appelant un \xe9v\xe9nement \xe0 partir du JS de l'\xe9cran de chargement:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",metastring:'title="Packages/my-loading-screen/index.js"',children:'Events.Call("StopMenuMusic")\n'})}),"\n",(0,s.jsx)(r.h2,{id:"configurer-votre-serveur-pour-utiliser-l\xe9cran-de-chargement",children:"Configurer votre serveur pour utiliser l'\xe9cran de chargement"}),"\n",(0,s.jsxs)(r.p,{children:["Apr\xe8s avoir cr\xe9e votre package loading-screen, vous devrez configurer votre serveur pour le charger dans votre ",(0,s.jsx)(r.a,{href:"/fr/docs/core-concepts/server-manual/server-configuration#server-configuration-file",children:"Config.toml"}),". Dans ",(0,s.jsx)(r.code,{children:"loading_screen"}),", mettez simplement le nom du dossier de votre Package."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-toml",metastring:'title="Server/Config.toml"',children:'# le package loading-screen \xe0 charger (l\'\xe9cran de chargement sera affich\xe9 quand les joueurs rejoindront votre serveur)\nloading_screen = "my-loading-screen"\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Or start it with ",(0,s.jsx)(r.code,{children:'--loading_screen "my-loading-screen"'}),"."]})]})}function u(e={}){const{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},64489:(e,r,n)=>{n.d(r,{Z:()=>s});const s=n.p+"assets/images/loading-screen-cb28559615ffd1f2db10366c83d588a8.webp"},11151:(e,r,n)=>{n.d(r,{Z:()=>l,a:()=>c});var s=n(67294);const t={},i=s.createContext(t);function c(e){const r=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);